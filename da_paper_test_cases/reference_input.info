ensemble
{
  ensemble_simulation true
  ensemble_size 4
  initial_temperature_stddev 5.0
}

experiment
{
  read_in_experimental_data true
  log_filename observations/build_time_log.txt
  file observations/build_#camera_#frame.csv 
  format ray
  data_columns 1,2,3,4
  first_frame 0
  last_frame 1000000000
  first_camera_id 0
  last_camera_id 0
  first_frame_temporal_offset 0.0
  estimated_uncertainty 5.0
  output_experiment_on_mesh true
}

data_assimilation
{
  assimilate_data true
  localization_cutoff_function gaspari_cohn
  localization_cutoff_distance 1.0e-2
  solver
  {
    max_number_of_temp_vectors 10
    convergence_tolerance 1.0e-4
    max_iterations 100000
  }
}


units
{
  mesh millimeter
}

geometry
{
  import_mesh true
  mesh_format exodusii
  mesh_file mesh.e ;
  dim 3 ; dimension of the domain
  reset_material_id true

  material_deposition true
  material_deposition_method scan_paths
  deposition_length 5.0e-3
  deposition_height 3.0e-3
  deposition_width 10.0e-3
  deposition_lead_time 1
  deposition_time 10.0
  material_height 12.555e-3
}

physics
{
  thermal true
  mechanical false
}

boundary
{
  type convective ; ,radiative
}

refinement
{
  n_refinements 0 ; Number of coarsening/refinement executed
  time_steps_between_refinement 200000 ; number of time steps after which
                                                 ; the refinement process is performed
}

materials
{
  n_materials 1

  property_format polynomial
  material_0
  {
    initial_temperature 300
    solid
    {
      density 7955; [kg/m^3] For now all the states needs to have the same
                    ; density.
      specific_heat 650; [J/kg K]
      thermal_conductivity_x 19.0 ; [W/m K]
      thermal_conductivity_y 19.0 ; [W/m K]
      thermal_conductivity_z 19.0 ; [W/m K]
      convection_heat_transfer_coef 0.12 ; [W/(m^2*K)]
      emissivity 0.05
      lame_first_parameter 77.2e9 ; [Pa]
      lame_second_parameter 72.2e9 ; [Pa]
      thermal_expansion_coef 3.101e-5 ; [1/K]
      elastic_limit 173e6 ; 50e9 ; [Pa]
      plastic_modulus 0.5e9 ; [Pa]
      isotropic_hardening 1
      density_s 7955
    }

    ;powder
    ;{
    ;  specific_heat 650; [J/kg K]
    ;  density 7990; [kg/m^3]
    ;  thermal_conductivity_x 0.38 ; [W/m K]
    ;  thermal_conductivity_y 0.38 ; [W/m K]
    ;  thermal_conductivity_z 0.38 ; [W/m K]
    ;  convection_heat_transfer_coef 0.05 ; [W/(m^2*K)]
    ;  emissivity 0.05
    ;}

    liquid
    {
      specific_heat 770.4; [J/kg K]
      density 7955; [kg/m^3]
      thermal_conductivity_x 19.0 ; [W/m k]
      thermal_conductivity_y 19.0 ; [W/m k]
      thermal_conductivity_z 19.0 ; [W/m k]
      convection_heat_transfer_coef 0.1 ; [W/(m^2*K)]
      emissivity 0.05
      ; Not all three states need to define the same properties or to exist
    }

    solidus 1670; [K]
    liquidus 1730; [K]
    latent_heat 2.68e5 ; [J/kg]
    radiation_temperature_infty 300 ; [K]
    convection_temperature_infty 300 ; [K]
  }
}

sources
{
  n_beams 1

  beam_0
  {
    type goldak ; goldak (laser) or electron_beam
    depth 5.0e-3 ; [m] maximum depth reached by the laser
    diameter 5.0e-3 ; [m]
    scan_path_file scan_path.inp
    scan_path_file_format event_series
    absorption_efficiency 0.7 ; number between 0 and 1 equivalent to
                              ; energy_conversion_efficiency * control_efficiency
                              ; for an electron beam
    max_power 1.0 ; [W], current * voltage for an electron beam
  }
}

time_stepping
{
  method forward_euler ; Possibilities: backward_euler, implicit_midpoint,
                        ; crank_nicolson, sdirk2, forward_euler, rk_third_order,
                        ; rk_fourth_order, bogacki_shampine, dopri,
                        ; fehlberg, cash_karp
  duration 1000 ;3500 ; [s]
  scan_path_for_duration true
  time_step 5.0e-2 ; [s]
}

post_processor
{
  filename_prefix solution
  time_steps_between_output 300
  additional_output_refinement 0
}

discretization
{
  thermal 
  {
    fe_degree 1
    quadrature gauss ; Optional parameter. Possibilities: gauss or lobatto
  }
  mechanical 
  {
    fe_degree 1
    quadrature gauss ; Optional parameter. Possibilities: gauss or lobatto
  }
}

profiling
{
  timer false
}

memory_space host ; Always run on the host
verbose_output false
